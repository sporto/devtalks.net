<% layout('../layout') -%>
<% var viewId = uid.generate() %>

<div id="<%= viewId %>" class="suggestions new ng-cloak" data-tags="<%= JSON.stringify(tags) %>"
		 ng-controller="suggestions.NewCtrl" xmlns="http://www.w3.org/1999/html">

	<div class="row">
		<div class="large-12 columns">
			<h1>Suggest a video</h1>

			<form name="suggestion_form" action="" nonvalidate>
			
				<input type="hidden" name="_csrf" value="<%= token %>">

				<input type="url" placeholder="URL" ng-model="model.url" name="url" required />

				<small class="error" ng-show="suggestion_form.url.$dirty && suggestion_form.url.$invalid">
					<span ng-show="suggestion_form.url.$error.required">Please add a url</span>
					<span ng-show="suggestion_form.url.$error.url">Please add a valid url</span>
				</small>

				<button class="small button" ng-disabled="suggestion_form.url.$invalid" ng-click="clickRetrieve($event)" ng-show="!state.retrieving">
					Retrieve information
				</button>
				<i class="icon-refresh icon-spin" ng-show="state.retrieving"></i>

				<br />

				<div ng-show="model.thumbM">
					<div class="th"><img ng-src="{{model.thumbM}}" /></div>
					<br />
				</div>

					<input type="text" placeholder="Title" ng-model="model.title" ng-minlength="5" name="title" required />

					<small class="error" ng-show="suggestion_form.title.$dirty && suggestion_form.title.$invalid">
						<span ng-show="suggestion_form.title.$error.required">Please add a title</span>
						<span ng-show="suggestion_form.title.$error.minlength">Please add at least 5 characters</span>
					</small>
					
					<input type="text" placeholder="Presenter(s)" ng-model="model.presenter" name="presenter" />
					
					<label for="">Description</label>
					<textarea ng-model="model.description"></textarea>
				</div>
			</div>

			<div class="row">
				<div class="large-12 columns">
					<label>Tags</label>
					<div class="select_tags" style="width:100%;"></div>
				</div>
				
			</div>
			
			<br />

			<div class="row">
				<div class="large-12 columns">
					<button class="button" ng-show="!state.saving" ng-disabled="suggestion_form.$invalid" ng-click="clickSave($event)">Save</button>
					<i class="icon-refresh icon-spin" ng-show="state.saving"></i>
				</div>
			</div>
		</form>

</div>
